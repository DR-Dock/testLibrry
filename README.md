# test_library
### 1. База данных.
<img src="https://github.com/DR-Dock/test_library/blob/main/%D1%81%D1%85%D0%B5%D0%BC%D0%B0.png" alt="">

Authors(авторы) – содержит id, имя, фамилию, отчество.

Students(читатели) - содержит id, имя, фамилию, отчество.

Books(книги) - содержит id, название, id автора(передается из таблицы авторов),год публикации, издательство.

Rentals(прокат книг) – содержит id проката, id книги(передается из таблицы с книгами),id читателя(передается из таблицы читателей), дата выдачи, дата возврата если уже вернули.

SQl код базы находится в файле library_db.txt, так же там есть тестовые данные и SQL запрос, который показывает самого популярного автора за (2020) год, запрос находится в самом конце файла, для демонстрации данного запроса реализована форма в приложении на странице с авторами. Для написания базы данных использовался MySQL.

### 2. Самый злостный читатель.	
Самый злостный читатель – читатель, у которого самое большое время проката какой либо книги, если есть несколько читателей с одинаковым временем, то суммируется время всех прокатов по каждому из таких читателей, далее вычисляется самое максимальное полученное значение. Данный алгоритм реализован в файле index.js(с 147 по 184 строки кода). Так же демонстрация данного алгоритма есть в приложении на странице с читателями. Время вычислялось как разница между датой начала проката и датой возврата, если книгу ещё не вернули, то разница вычисляется между началом проката и текущей датой. Всё время переведено в часы.

### 3. Инструкция развертывания:
* Установить node.js
* Выполнить команду (npm install) 
* Установить MySQL server, открыть консоль MySQL, создать базу данных library_db, войти в неё и скопировать всё содержимое из файла library_db.txt. Для изменения параметров коннекта к базе, смотреть файл index.js  261 – 268 строки кода.
* Запустить приложение (node index.js)
